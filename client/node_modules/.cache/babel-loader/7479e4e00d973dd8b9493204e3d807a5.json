{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import react from'react';import React from'react';import axios from'axios';import{useState,useEffect}from'react';import\"./form.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form(props){var input=React.useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(props.question),_useState4=_slicedToArray(_useState3,2),question=_useState4[0],setQuestion=_useState4[1];var _useState5=useState(props.indexOfAnswer),_useState6=_slicedToArray(_useState5,2),selectedAnswer=_useState6[0],setAnswer=_useState6[1];function onClick(){return _onClick.apply(this,arguments);}function _onClick(){_onClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post('/api/v1/admin/edit/question-delete',{quizId:props.quizId,id:props.id}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setQuiz(res.data);case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref.apply(this,arguments);};}()).catch(function(err){return console.log(err);});case 2:_context3.next=4;return axios.post(\"/api/v1/admin/quiz/query\",{search:props.search,_id:props.quizId}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(response){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(response.data);props.setQuestions(response.data);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}()).catch(function(error){});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _onClick.apply(this,arguments);}function onChange(e){setQuestion(input.current.value);}function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();console.log(question);_context5.next=4;return axios.post('/api/v1/admin/edit/quiz',{indexOfAnswer:selectedAnswer,quizId:props.quizId,question:question,data:data,id:props.id}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(res){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(res.data);case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref3.apply(this,arguments);};}()).catch(function(err){return console.log(err);});case 4:case\"end\":return _context5.stop();}}},_callee5);}));return _onSubmit.apply(this,arguments);}var answerItems=props.answerChoices.map(function(answer,index){return/*#__PURE__*/_jsx(Answer,{selectedAnswer:selectedAnswer,setAnswer:setAnswer,setData:setData,data:data,onChange:onChange,answerChoices:props.answerChoices,index:index,answer:answer});});return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-5\",children:[/*#__PURE__*/_jsx(\"i\",{onClick:onClick,className:\"fa-solid fa-trash questionDeletion\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-3\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",ref:input,onChange:onChange,defaultValue:props.question})}),/*#__PURE__*/_jsx(\"h6\",{children:\"Select the correct answer: \"}),/*#__PURE__*/_jsx(\"div\",{children:answerItems}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",type:\"submit\",children:\"Submit Changes\"})]})})]});}function Answer(props){var _useState7=useState(\"form-control\"),_useState8=_slicedToArray(_useState7,2),style=_useState8[0],setStyle=_useState8[1];var textInput=React.useRef();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),clicked=_useState10[0],setClick=_useState10[1];function onChange(e){var deepCopy=[];if(props.data.length===0){for(var i=0;i<props.answerChoices.length;i++){deepCopy.push(props.answerChoices[i]);}}else{for(var _i=0;_i<props.data.length;_i++){deepCopy.push(props.data[_i]);}}deepCopy[props.index]=textInput.current.value;props.setData(deepCopy);console.log(props.data);}//function allows the admin to change the correct answer \nfunction onClick(){if(props.selectedAnswer===props.index){setStyle(\"form-control\");setClick(true);props.setAnswer(-1);console.log(style);//remove class\n}else if(props.selectedAnswer===-1){setClick(true);props.setAnswer(props.index);setStyle(\"select \"+style);}}useEffect(function(){if(props.selectedAnswer===props.index&&!clicked){setStyle(\"select \"+style);console.log(style);}},[props.selectedAnswer]);return/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsx(\"input\",{className:style,onClick:onClick,onChange:onChange,ref:textInput,type:\"text\",defaultValue:props.answer})})});}","map":{"version":3,"names":["react","React","axios","useState","useEffect","Form","props","input","useRef","data","setData","question","setQuestion","indexOfAnswer","selectedAnswer","setAnswer","onClick","post","quizId","id","then","res","setQuiz","catch","err","console","log","search","_id","response","setQuestions","error","onChange","e","current","value","onSubmit","preventDefault","answerItems","answerChoices","map","answer","index","Answer","style","setStyle","textInput","clicked","setClick","deepCopy","length","i","push"],"sources":["/Users/clairemurphy/Documents/web-development/Training-Website/client/src/components/admin-page/form-edit.js"],"sourcesContent":["import react from 'react';\nimport React from 'react';\nimport axios from 'axios';\nimport {useState, useEffect} from 'react';\nimport \"./form.css\";\n\nexport default function Form(props) {\n    const input = React.useRef();\n    const [data, setData] = useState([]);\n    const [question, setQuestion] = useState(props.question)\n    const [selectedAnswer, setAnswer] = useState(props.indexOfAnswer);\n    async function onClick() {\n        await axios.post('/api/v1/admin/edit/question-delete', { quizId: props.quizId, id: props.id}).then(async res => {\n            props.setQuiz(res.data);\n           }).catch(err => console.log(err));\n        await axios.post(\"/api/v1/admin/quiz/query\", {search: props.search, _id: props.quizId}).then( async (response) => {\n            console.log(response.data);\n            props.setQuestions(response.data)\n        })\n        .catch(function (error) {\n  });   \n    }\n    function onChange(e) {\n        setQuestion(input.current.value);\n    }\n    async function onSubmit(e) {\n        e.preventDefault();\n        console.log(question)\n        await axios.post('/api/v1/admin/edit/quiz', {indexOfAnswer: selectedAnswer, quizId: props.quizId, question: question, data: data, id: props.id}).then(async res => {\n            console.log(res.data);\n\n           }).catch(err => console.log(err));\n        \n    }\n    const answerItems = props.answerChoices.map((answer,index) => (<Answer selectedAnswer={selectedAnswer} setAnswer={setAnswer} setData={setData} data={data} onChange = {onChange} answerChoices={props.answerChoices} index={index} answer={answer}/>))\n    return (\n<div className=\"container my-5\">\n<i onClick={onClick}className=\"fa-solid fa-trash questionDeletion\"></i>\n<div className=\"\">\n  <form onSubmit={onSubmit}>\n  <div class=\"mb-3\">\n  <textarea className=\"form-control\" ref={input} onChange={onChange}  defaultValue = {props.question}></textarea>\n</div>\n    <h6>Select the correct answer: </h6>\n    <div>{answerItems}</div>\n    <button className= \"btn btn-dark\"type=\"submit\">Submit Changes</button>\n    </form>\n</div>\n</div>\n\n    )\n\n\n\n\n}\n\nfunction Answer(props) {\n    const [style, setStyle] = useState(\"form-control\")\n    const textInput = React.useRef();\n    const [clicked, setClick] = useState(false);\n    \n    function onChange(e) {\n        let deepCopy = [];\n        if ( props.data.length === 0 ) {\n            for (let i = 0; i < props.answerChoices.length; i++) {\n                deepCopy.push(props.answerChoices[i])\n            }\n        } else {\n            for (let i = 0; i < props.data.length; i++) {\n                deepCopy.push(props.data[i])\n        }\n    }\n        deepCopy[props.index] = textInput.current.value\n        props.setData(deepCopy);\n        console.log(props.data)\n\n\n    }\n    //function allows the admin to change the correct answer \n    function onClick() {\n        \n        if (props.selectedAnswer === props.index) {\n            setStyle(\"form-control\");\n            setClick(true);\n            props.setAnswer(-1);\n            console.log(style)\n            //remove class\n        } else if(props.selectedAnswer === -1) {\n            setClick(true);\n            props.setAnswer(props.index);\n            setStyle(\"select \" + style);\n\n        }\n    }\n\n    useEffect(() => {\n        if (props.selectedAnswer === props.index  && !clicked) {\n            setStyle(\"select \" + style);\n            console.log(style)\n        } \n\n    },[props.selectedAnswer])\n\n    return (\n            <div className=\"mb-2 row\">\n                <div className=\"col-lg-6\">\n                <input className = {style} onClick={onClick} onChange={onChange} ref={textInput} type = \"text\" defaultValue={props.answer}></input>\n                </div>\n            </div>\n      )\n}\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}