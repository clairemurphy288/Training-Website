{"ast":null,"code":"import _regeneratorRuntime from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/clairemurphy/Documents/web-development/Training-Website/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import Navbar from\"./navbar/quiznavbar\";import'./score.css';import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function GetScores(){var location=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),scores=_useState4[0],setScores=_useState4[1];useEffect(function(){getScore();},[]);useEffect(function(){var rank=0;var aList=[];if(data.length>0){aList=data.map(function(object,index,array){if(index>0&&array[index-1].quizScores.score==object.quizScores.score){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:rank}),/*#__PURE__*/_jsx(\"td\",{children:object.username}),/*#__PURE__*/_jsx(\"td\",{children:object.quizScores.score})]});}else{rank++;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:rank}),/*#__PURE__*/_jsx(\"td\",{children:object.username}),/*#__PURE__*/_jsx(\"td\",{children:object.quizScores.score})]});}});setScores(aList);}},[data]);function getScore(){return _getScore.apply(this,arguments);}function _getScore(){_getScore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/v1/score\",{params:{currentUser:localStorage.getItem('currentUser'),score:location.state.score,quiz:location.state.quiz}}).then(function(response){console.log(response.data);setData(response.data);}).catch(function(error){console.log(error);});case 2:data=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return _getScore.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"scoreboard-body\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"scoreboard-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"scoreboard-table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Score\"})]}),scores.map(function(o){return o;})]})})]});}","map":{"version":3,"names":["axios","React","useState","useEffect","Navbar","useLocation","GetScores","location","data","setData","scores","setScores","getScore","rank","aList","length","map","object","index","array","quizScores","score","username","get","params","currentUser","localStorage","getItem","state","quiz","then","response","console","log","catch","error","o"],"sources":["/Users/clairemurphy/Documents/web-development/Training-Website/client/src/components/quiz/scores.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport Navbar from \"./navbar/quiznavbar\";\nimport './score.css';\nimport { useLocation } from \"react-router-dom\";\n\nexport default function GetScores() {\n    const location = useLocation();\n    const [data, setData] = useState([]);\n    const [scores, setScores] = useState([]);\n\n    useEffect(() => {\n        getScore()\n    }, []);\n\n    useEffect(()=> {\n        let rank = 0;\n        let aList = []\n        if(data.length > 0) {\n             aList = data.map((object, index, array)=> {\n                if (index > 0 && array[index - 1].quizScores.score == object.quizScores.score) {\n                    return <tr>\n                            <td>{rank}</td>\n                            <td>{object.username}</td>\n                            <td>{object.quizScores.score}</td>\n                        </tr>\n                } else {\n                rank++;\n                return <tr>\n                    <td>{rank}</td>\n                    <td>{object.username}</td>\n                    <td>{object.quizScores.score}</td>\n                </tr>\n                }\n            })\n            setScores(aList);\n        }\n\n    }, [data])\n\n    async function getScore() {\n        const data = await axios\n        .get(\"/api/v1/score\", {params: { currentUser: localStorage.getItem('currentUser'), score: location.state.score, quiz: location.state.quiz}})\n        .then(function(response) {\n            console.log(response.data)\n            setData(response.data);\n        })\n        .catch(function(error) {\n            console.log(error);\n        });\n    }\n\n    return (\n        <div className=\"scoreboard-body\">\n            <Navbar />\n            <div className=\"scoreboard-wrapper\">\n                <table className=\"scoreboard-table\">\n                    <tr>\n                        <th>Rank</th>\n                        <th>Username</th>\n                        <th>Score</th>\n                    </tr>\n                    {scores.map((o) => {\n                        return o;\n                    })}\n                </table>\n            </div>            \n        </div>\n    );\n}"],"mappings":"ieAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,MAAO,aAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,cAAe,SAASC,UAAT,EAAqB,CAChC,GAAMC,SAAQ,CAAGF,WAAW,EAA5B,CACA,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAA4BP,QAAQ,CAAC,EAAD,CAApC,yCAAOQ,MAAP,eAAeC,SAAf,eAEAR,SAAS,CAAC,UAAM,CACZS,QAAQ,GACX,CAFQ,CAEN,EAFM,CAAT,CAIAT,SAAS,CAAC,UAAK,CACX,GAAIU,KAAI,CAAG,CAAX,CACA,GAAIC,MAAK,CAAG,EAAZ,CACA,GAAGN,IAAI,CAACO,MAAL,CAAc,CAAjB,CAAoB,CACfD,KAAK,CAAGN,IAAI,CAACQ,GAAL,CAAS,SAACC,MAAD,CAASC,KAAT,CAAgBC,KAAhB,CAAyB,CACvC,GAAID,KAAK,CAAG,CAAR,EAAaC,KAAK,CAACD,KAAK,CAAG,CAAT,CAAL,CAAiBE,UAAjB,CAA4BC,KAA5B,EAAqCJ,MAAM,CAACG,UAAP,CAAkBC,KAAxE,CAA+E,CAC3E,mBAAO,mCACC,oBAAKR,IAAL,EADD,cAEC,oBAAKI,MAAM,CAACK,QAAZ,EAFD,cAGC,oBAAKL,MAAM,CAACG,UAAP,CAAkBC,KAAvB,EAHD,GAAP,CAKH,CAND,IAMO,CACPR,IAAI,GACJ,mBAAO,mCACH,oBAAKA,IAAL,EADG,cAEH,oBAAKI,MAAM,CAACK,QAAZ,EAFG,cAGH,oBAAKL,MAAM,CAACG,UAAP,CAAkBC,KAAvB,EAHG,GAAP,CAKC,CACJ,CAfQ,CAAR,CAgBDV,SAAS,CAACG,KAAD,CAAT,CACH,CAEJ,CAvBQ,CAuBN,CAACN,IAAD,CAvBM,CAAT,CATgC,QAkCjBI,SAlCiB,oIAkChC,oKACuBZ,MAAK,CACvBuB,GADkB,CACd,eADc,CACG,CAACC,MAAM,CAAE,CAAEC,WAAW,CAAEC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAf,CAAoDN,KAAK,CAAEd,QAAQ,CAACqB,KAAT,CAAeP,KAA1E,CAAiFQ,IAAI,CAAEtB,QAAQ,CAACqB,KAAT,CAAeC,IAAtG,CAAT,CADH,EAElBC,IAFkB,CAEb,SAASC,QAAT,CAAmB,CACrBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACvB,IAArB,EACAC,OAAO,CAACsB,QAAQ,CAACvB,IAAV,CAAP,CACH,CALkB,EAMlB0B,KANkB,CAMZ,SAASC,KAAT,CAAgB,CACnBH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACH,CARkB,CADvB,QACU3B,IADV,qEAlCgC,2CA8ChC,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,MAAD,IADJ,cAEI,YAAK,SAAS,CAAC,oBAAf,uBACI,eAAO,SAAS,CAAC,kBAAjB,wBACI,mCACI,4BADJ,cAEI,gCAFJ,cAGI,6BAHJ,GADJ,CAMKE,MAAM,CAACM,GAAP,CAAW,SAACoB,CAAD,CAAO,CACf,MAAOA,EAAP,CACH,CAFA,CANL,GADJ,EAFJ,GADJ,CAiBH"},"metadata":{},"sourceType":"module"}